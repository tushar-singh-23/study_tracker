{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Your Progress</h2>
    {% for topic, percentage in progress.items() %}
        <div class="mb-3">
            <h5>{{ topic }}: {{ percentage | round(2) }}%</h5>
            <div class="progress">
                <div class="progress-bar bg-success" role="progressbar" style="width: {{ percentage }}%;" aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
    {% endfor %}

    <h2 class="mb-4">Your Lessons</h2>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Topic</th>
                <th>Lesson</th>
                <th>Confidence Level</th>
                <th>Next Review Date</th>
                <th>Last Studied</th>
                <th>Notes</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for lesson in lessons %}
            <tr>
                <td>{{ lesson.topic }}</td>
                <td>{{ lesson.lesson_name }}</td>
                <td>{{ lesson.confidence_level }}</td>
                <td>{{ lesson.next_review_date or 'N/A' }}</td>
                <td>{{ lesson.last_studied or 'N/A' }}</td>
                <td>{{ lesson.notes or '' }}</td>
                <td>
                    <a href="{{ url_for('main.update_lesson', lesson_id=lesson.lesson_id) }}" class="btn btn-sm btn-primary">
                        <i class="fas fa-edit"></i> Update
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
